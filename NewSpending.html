<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    
    <title>Новая трата</title>
  </head>
  <body>


    <div class="contaiter m-5">
      <h2>Новая трата</h2>
       <form>
        <select id = "category" placeholder="Категория" class="form-control">
          <option>Продукты</option>
          <option>Курение</option>
          <option>Снеки, сладости и напитки</option>
          <option>Кафе и рестораны</option>
          <option>Перемещение</option>
          <option>Аренда жилья и коммуналка</option>
          <option>Товары для животных</option>
          <option>Товары для дома</option>
          <option>Аптеки и медицина</option>
          <option>Красота</option>
          <option>Подарки и развлечения</option>

          </select>
        <br>
        <label>Дата</label>
        <input type="date" id = "spending_date" class="form-control">
        <br>
        <input type="number" step="0.01" id = "price" placeholder="Сумма" class="form-control">
        <br>
        <label>Доп.описание</label>
        <textarea type="text" id = "comment" class="form-control" style="height: 200px;"></textarea>
        <br>

</form>
</div>
    
    
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
      let tg = window.Telegram.WebApp; 
      tg.MainButton.text = "Добавить трату";
      
      tg.MainButton.show().onClick(function(){
        var d = new Date(Date.parse(document.getElementById('spending_date').value))
        let date = ('0' + d.getDate()).slice(-2) + '-'
             + ('0' + (d.getMonth()+1)).slice(-2) + '-'
             + d.getFullYear();

        var e = document.getElementById("category");
        var text = e.options[e.selectedIndex].text;

        let res = text + '*'+
        date + '*'+
      document.getElementById('price').value + '*'+
      document.getElementById('comment').value;
      tg.sendData(res); 
        });
    </script>



    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>
</html>
